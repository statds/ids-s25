{"title":"Exercises","markdown":{"headingText":"Exercises","headingAttr":{"id":"sec-ex","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n1. **Quarto and Git setup**\n  Quarto and Git are two important tools for data science. Get\n  familiar with them through the following tasks. Please use\n  the [`templates/hw.qmd`](https://github.com/statds/ids-f24/blob/main/templates/hw.qmd)\n  template to document, for each step, what you did, the obstacles you\n  encountered, and how you overcame them. Think of this as a user\n  manual for students who are new to this. Use the command line\n  interface.\n    a.  Set up SSH authentication between your computer and your\n\tGitHub account.\n    a.  Install Quarto onto your computer following the instructions\n    of [Get Started](https://quarto.org/docs/get-started/). \n    a.  Pick a tool of your choice (e.g., VS Code, Jupyter Notebook,\n    Emacs, etc.), follow the instructions to reproduce the example\n    of line plot on polar axis.\n    a.  Render the homework into a pdf file and put the file into\n    a release in your GitHub repo.\n    \n1. **Working on Homework Problems**\n    a.  What are the differences between binary and source files?\n    a.  Why do we not want to track binary files in a repo?\n    a.  Why do I require pdf output via release?\n    a.  Why do I not want your files added via 'upload'?\n    a.  Why do I require line width under 80?\n    a.  Why is it not a good idea to have spaces in file/folder names?\n\n1. **Contributing to the Class Notes**\n  To contribute to the classnotes, you need to have a working\n  copy of the sources on your computer. Document the following\n  steps in a `qmd` file in the form of a step-by-step manual, as if\n  you are explaining them to someone who wants to contribute too. Make\n  at least 10 commits for this task, each with an informativ emessage.\n    a.  Create a fork of the notes repo into your own GitHub account.\n    a.  Clone it to an appropriate folder on your computer.\n    a.  Render the classnotes on your computer; document the obstacles\n    and solutions.\n    a.  Make a new branch (and name it appropriately) to experiment\n    with your changes.\n    a.  Checkout your branch and add your wishes to the wish list; \n    commit with an informative message; and\n    push the changes to your GitHub account.\n    a.  Make a pull request to class notes repo from your fork at\n    GitHub. Make sure you have clear messages to document the changes.\n\n1. **Monty Hall**\n   Consider a generalized Monty Hall experiment. Suppose that the game\n   start with $n$ doors; after you pick one, the host opens\n   $m \\le n - 2$ doors, that show no award.  Include sufficient text\n   around the code chunks to explain them.\n    a.  Write a function to simulate the experiment once. The function\n   takes two arguments `ndoors` and `nempty`, which represent the\n   number of doors and the number of empty doors showed by the host,\n   respectively, It returns the result of two strategies, switch and\n   no-switch, from playing this game. \n    a.  Play this game with 3 doors and 1 empty a few times.\n\ta.  Play this game with 10 doors and 8 empty a few times.\n\ta.  Write a function to play this game `ntrial` times and return\n   the proportion of wins for both strategies.\n    a.  Apply your function to play this game 1000 times, with 3 doors\n   and 10 doors, and summarize your results.\n    a.  Write a function to demonstrate the Monty Hall problem through\n   simulation. The function takes two arguments `ndoors` and\n   `ntrials`, representing the number of doors in the experiment and\n   the number of trials in a simulation, respectively. The function\n   should return the proportion of wins for both the switch and\n   no-switch strategy. \n    a.  Apply your function with 3 doors and 5 doors,\n   both with 1000 trials. Summarize your results.\n\n1.  **Approximating $\\pi$**\n   Write a function to do a Monte Carlo approximation of $\\pi$. The\n   function takes a Monte Carlo sample size `n` as input, and returns\n   a point estimate of $\\pi$ and a 95% confidence interval. Apply your\n   function with sample size 1000, 2000, 4000, and 8000. Repeat the experiment \n   1000 times for each sample size and check the empirical probability that the\n   confidence intervals cover the true value of $\\pi$. Comment on\n   the results.\n\n1.  **Google Billboard Ad**\n   Find the first 10-digit prime number occurring in consecutive\n   digits of $e$. This was a [Google recruiting\n   ad](http://mathworld.wolfram.com/news/2004-10-13/google/).\n\n1. **Game 24**\n   The [math game 24](http://en.wikipedia.org/wiki/24_Game) is one of the\n   addictive games among number lovers. With four randomly selected cards form\n   a deck of poker cards, use all four values and elementary arithmetic\n   operations ($+-\\times /$) to come up with 24. Let $\\square$ be one of\n   the four numbers. Let $\\bigcirc$ represent one of the four operators.\n   For example, \n   \\begin{equation*}\n    (\\square \\bigcirc \\square) \\bigcirc (\\square \\bigcirc \\square)\n   \\end{equation*}\n   is one way to group the the operations.\n   a.  List all the possible ways to group the four numbers.\n   a.  How many possible ways are there to check for a solution?\n   a.  Write a function to solve the problem in a brutal force way. The\n   inputs of the function are four numbers. The function returns a list\n   of solutions. Some of the solutions will be equivalent, but let us\n   not worry about that for now.\n\n1. **NYC Crash Data Cleaning**\n   The NYC motor vehicle collisions data with documentation is available from\n   [NYC Open\n   Data](https://data.cityofnewyork.us/Public-Safety/Motor-Vehicle-Collisions-Crashes/h9gi-nx95).\n   The raw data needs some cleaning.\n    a.  Use the filter from the website to download the crash\n    data of the week of June 30, 2024 in CSV format;\n    save it under a directory `data` with an informative\n    name (e.g., `nyccrashes_2024w0630_by20240916.csv`);\n    read the data into a Panda data frame with careful\n    handling of the date time variables.\n    a.  Clean up the variable names. Use lower cases and replace\n    spaces with underscores.\n    a.  Get the basic summaries of each variables:\n    missing percentage; descriptive statistics for continuous variables;\n    frequency tables for discrete variables.\n    a.  Are their invalid `longitude` and `latitude` in the data?\n    If so, replace them with `NA`.\n    a.  Are there `zip_code` values that are not legit NYC zip codes?\n    If so, replace them with `NA`.\n    a.  Are there missing in `zip_code` and `borough`? Do they\n    always co-occur?\n    a.  Are there cases where `zip_code` and `borough` are missing\n    but the geo codes are not missing? If so, fill in `zip_code`\n    and `borough` using the geo codes.\n    a.  Is it redundant to keep both `location` and the\n    `longitude`/`latitude` at the NYC Open Data server?\n    a.  Check the frequency of `crash_time` by hour. Is there a matter\n    of bad luck at exactly midnight? How would you interpret this?\n    a.  Are the number of persons killed/injured the summation of\n    the numbers of pedestrians, cyclist, and motorists killed/injured?\n    If so, is it redundant to keep these two columns at the NYC\n    Open Data server?\n    a.  Print the whole frequency table of\n    `contributing_factor_vehicle_1`. \n    Convert lower cases to uppercases and check the frequencies again.\n    a.  Provided an opportunity to meet the data provider, what\n    suggestions would you make based on your data exploration\n    experience?\n\n1. **NYC Crash Data Exploration** Except for the first question, use\n   the cleaned crash data in feather format.\n    a.  Construct a contigency table for missing in geocode (latitude and\n     longitude) by borough. Is the missing pattern the same across boroughs?\n     Formulate a hypothesis and test it. \n    a.  Construct a `hour` variable with integer values from 0 to 23. Plot the\n     histogram of the number of crashes by `hour`. Plot it by borough.\n    a.  Overlay the locations of the crashes on a map of NYC. The map could be a\n     static map or Google map.\n    a.  Create a new variable `severe` which is one if the number of persons\n     injured or deaths is 1 or more; and zero otherwise. Construct a cross\n     table for `severe` versus borough. Is the severity of the crashes the\n     same across boroughs? Test the null hypothesis that the two variables\n     are not associated with an appropriate test.\n    a.  Merge the crash data with the zip code database.\n    a.  Fit a logistic model with `severe` as the outcome variable and covariates\n     that are available in the data or can be engineered from the data. For\n     example, zip code level covariates can be obtained by merging with the\n     zip code database; crash hour; number of vehicles involved.\n\n1. **NYC Crash severity modeling**\n   Using the cleaned NYC crash data, merged with zipcode level\n   information, predict `severe` of a crash.\n    a.  Set random seed to `1234`. Randomly select 20% of the\n       crashes as testing data and leave the rest 80% as training\n       data.\n    a.  Fit a logistic model on the training data and validate the\n       performance on the testing data. Explain the confusion matrix\n       result from the testing data. Compute the F1 score.\n    a.  Fit a logistic model on the training data with $L_1$\n       regularization. Select the tuning parameter with 5-fold\n       cross-validation in F1 score\n\ta.  Apply the regularized logistic regression to predict the\n       severity of the crashes in the testing data. Compare the\n\t   performance of the two logistic models in terms of accuracy, \n\t   precision, recall, F1-score, and AUC.\n\n\n1. **Midterm project: Noise complaints in NYC**\n   The [NYC Open Data of 311 Service Requests](https://data.cityofnewyork.us/Social-Services/311-Service-Requests-from-2010-to-Present/erm2-nwe9) contains\n   all requests from 2010 to present. We consider a subset of it with\n   requests to NYPD on noise complaints that are created between\n   00:00:00 06/30/2024 and 24:00:00 07/06/2024. The subset is\n   available in CSV format as\n   `data/nypd311w063024noise_by100724.csv`. \n   Read the data dictionary online to understand the meaning of the\n   variables.\n    a.  Data cleaning.\n        i.  Import the data, rename the columns with our preferred styles.\n        i.   Summarize the missing information. Are there variables that\n       are close to completely missing? \n        i.  Are there redundant information in the data? Try storing the\n          data using the Arrow format and comment on the efficiency\n          gain.\n        i.  Are there invalid NYC zipcode or borough? Justify and clean\n          them if yes.\n        i.  Are there date errors? Examples are earlier `closed_date`\n          than `created_date`; `closed_date` and `created_date`\n          matching to the second; dates exactly at midnight or noon to\n          the second; `action_update_date` after `closed_date`.\n        i.  Summarize your suggestions to the data curator in several\n          bullet points.\n    a.  Data exploration.\n        i.  If we suspect that response time may depend on the time of\n          day when a complaint is made, we can compare the response\n          times for complaints submitted during nighttime and\n          daytime. To do this, we can visualize the comparison by\n          complaint type, borough, and weekday (vs weekend/holiday).\n        i.  Perform a formal hypothesis test to confirm the observations\n          from your visualization. Formally state your hypotheses and\n          summarize your conclusions in plain English.\n        i.  Create a binary variable `over2h` to indicate that a service\n          request took two hours or longer to close. \n        i. Does `over2h`\n          depend on the complaint type, borough, or weekday (vs\n          weekend/holiday)? State your hypotheses and summarize your\n          conclusions in plain English.\n    a.  Data analysis.\n        i.  The addresses of NYC police precincts are stored in\n       `data/nypd_precincts.csv`. Use geocoding tools to find their\n       geocode (longitude and latitude) from the addresses.\n        i.  Create a variable `dist2pp` which represent the distance\n       from each request incidence to the nearest police precinct. \n        i.  Create zip code level variables by merging with data from\n          package `uszipcode`.\n        i.  Randomly select 20% of the complaints as testing data with\n          seeds `1234`. Build a logistic model to predict `over2h` for\n          the noise complaints with the training data, using all the\n          variables you can engineer from the available data. If you\n          have tuning parameters, justify how they were selected.\n        i.  Assess the performance of your model in terms of commonly\n          used metrics. Summarize your results to a New Yorker who is\n          not data science savvy.\n\n\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"exercises.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.40","bibliography":["references.bib"],"csl":"apa.csl","theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","include-in-header":["preamble.tex"],"output-file":"exercises.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"csl":"apa.csl","documentclass":"scrbook"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}